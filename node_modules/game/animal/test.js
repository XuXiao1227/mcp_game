var async = require('async');

var esut = require('easy_util');
var log = esut.log;
var assert = esut.assert;

var config = require('config');
var ec = config.ec;

var validate = require('./Validate.js');

var check = require('./Check.js');

async.waterfall([
    function(cb){ //正常投注
        validate.do({number:'1', multiple:1, amount:10}, function(err, data){
            assert.eq(err, null);
            cb(null);
        });
    },
    function(cb){ //校验超过范围
        validate.do({number:'1,0', multiple:2, amount:20}, function(err, data){
            assert.eq(err, ec[2000]);
            assert.eq(data, null);
            cb(null);
        });
    },
    function(cb)
    {
        var number = '1,2,3,4,5,6';
        check.do({number:number, multiple:2, amount:20}, function(err, data){
            cb(null);
        });
    }
], function (err, result) {
    console.log("测试通过");
});
