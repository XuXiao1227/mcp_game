var async = require('async');

var esut = require('easy_util');
var digestUtil = esut.digestUtil;
var pageUtil = esut.pageUtil;
var dateUtil = esut.dateUtil;

var service = require('service');
var loginService = service.loginService;

var config = require('config');
var ec = config.ec;

var dc = require('db').dc;

var cons = require('cons');
var fileType = cons.fileType;

var PageControl = function(){};

PageControl.prototype.handle = function(headNode, bodyNode, cb)
{
    var self = this;
    var cmd = headNode.cmd;
    if(self[cmd[1]])
    {
        self[cmd[1]](headNode, bodyNode, cb);
    }
    else
    {
        cb(ec[100]);
    }
};

PageControl.prototype.pageBar = function(headNode, bodyNode, cb)
{
    var self = this;
    var backBodyNode = {};
    backBodyNode.id = bodyNode.id;
    backBodyNode.parent = bodyNode.parent;
    backBodyNode.parentId = bodyNode.parentId;
    backBodyNode.count = bodyNode.count;
    backBodyNode.skip = bodyNode.skip;
    backBodyNode.limit = bodyNode.limit;
    async.waterfall([
        function(cb)    //获取记录集
        {
            cb(null);
        }
    ], function (err, result) {
        cb(err, backBodyNode);
    });
};

/**
 * 系统工具页面
 * @param headNode
 * @param bodyNode
 * @param cb
 */
PageControl.prototype.cmd = function(headNode, bodyNode, cb)
{
    var self = this;
    var backBodyNode = {};
    backBodyNode.id = bodyNode.id;
    backBodyNode.parent = bodyNode.parent;
    async.waterfall([
        function(cb)    //获取记录集
        {
            cb(null);
        }
    ], function (err, result) {
        cb(err, backBodyNode);
    });
};

/**
 * 系统接入文档
 * @param headNode
 * @param bodyNode
 * @param cb
 */
PageControl.prototype.doc = function(headNode, bodyNode, cb)
{
    var self = this;
    var backBodyNode = {};
    backBodyNode.id = bodyNode.id;
    backBodyNode.parent = bodyNode.parent;
    async.waterfall([
        function(cb)    //获取记录集
        {
            cb(null);
        }
    ], function (err, result) {
        cb(err, backBodyNode);
    });
};

var PageControl = new PageControl();
module.exports = PageControl;